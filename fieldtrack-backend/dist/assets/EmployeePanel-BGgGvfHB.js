import{_ as R,u as E,r as l,o as j,c as a,a as d,b as s,d as g,e as r,t as o,f as u,F as h,g as _,n as P,h as w}from"./index-BQ6H7z-i.js";const N={class:"bg-gray-100 min-h-screen py-8 px-4 sm:px-6 lg:px-8"},V={class:"max-w-7xl mx-auto space-y-8"},q={class:"md:flex md:items-center md:justify-between"},C={class:"flex items-center"},$={key:0,class:"text-2xl font-semibold text-gray-900 leading-tight"},B={class:"text-indigo-700"},I={class:"mt-1 text-sm text-gray-600"},T={class:"font-medium text-gray-800"},z={class:"mt-4 flex md:mt-0 md:ml-4 space-x-2"},F={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"},L={class:"bg-blue-50 shadow rounded-lg overflow-hidden"},M={class:"p-6"},Q={class:"flex items-center"},U={class:"ml-4"},W={class:"mt-1 text-3xl font-semibold text-blue-700"},G={class:"bg-amber-50 shadow rounded-lg overflow-hidden"},H={class:"p-6"},J={class:"flex items-center"},K={class:"ml-4"},O={class:"mt-1 text-3xl font-semibold text-amber-700"},X={class:"bg-green-50 shadow rounded-lg overflow-hidden"},Y={class:"p-6"},Z={class:"flex items-center"},ss={class:"ml-4"},es={class:"mt-1 text-3xl font-semibold text-green-700"},ts={class:"bg-white shadow rounded-lg overflow-hidden"},os={role:"list",class:"divide-y divide-gray-200"},ns={class:"flex items-center justify-between"},is={class:"text-sm font-medium text-indigo-700"},ls={class:"ml-2 flex-shrink-0"},as={class:"mt-2 sm:flex sm:justify-between"},ds={class:"sm:flex"},rs={class:"mr-4 flex items-center text-sm text-gray-600"},ms={key:0,class:"px-6 py-4 sm:px-6 text-gray-500 italic"},xs={class:"bg-white shadow rounded-lg overflow-hidden"},us={role:"list",class:"divide-y divide-gray-200"},ps={class:"flex items-center justify-between"},cs={class:"text-sm font-medium text-amber-700"},gs={class:"ml-2 flex-shrink-0"},fs={class:"px-2 py-1 text-xs font-medium bg-amber-100 text-amber-800 rounded-full"},vs={class:"mt-2 sm:flex sm:justify-between"},ys={class:"sm:flex"},bs={class:"mr-4 flex items-center text-sm text-gray-600"},hs={key:0,class:"px-6 py-4 sm:px-6 text-gray-500 italic"},_s={class:"bg-white shadow rounded-lg overflow-hidden"},ws={class:"px-6 py-5 sm:px-6 flex gap-3"},ks={__name:"EmployeePanel",setup(Ss){const m=E(),f=l(0),v=l(0),y=l(0),p=l([]),c=l([]),x=l(null),b=l(!0),k=l(null),S=async()=>{try{const n=localStorage.getItem("token"),e=await w.get("http://localhost:5000/api/profile/me",{headers:{Authorization:`Bearer ${n}`}});x.value=e.data}catch(n){console.error("Error fetching profile:",n)}},D=async()=>{b.value=!0;try{const n=localStorage.getItem("token");if(!n)return;const i=(await w.get("http://localhost:5000/api/expenses",{headers:{Authorization:`Bearer ${n}`}})).data;f.value=i.length,v.value=i.filter(t=>t.Approval_Status==="Pending").length,y.value=i.filter(t=>t.Approval_Status==="Approved").length,p.value=i.slice().sort((t,A)=>new Date(A.Date_Submitted)-new Date(t.Date_Submitted)).slice(0,5).map(t=>({id:t.Expense_ID,type:t.Expense_Type,status:t.Approval_Status,date:t.Date_Submitted})),c.value=i.filter(t=>t.Approval_Status==="Pending").map(t=>({id:t.Expense_ID,type:t.Expense_Type,status:t.Approval_Status,date:t.Date_Submitted}))}catch(n){console.error("Error fetching dashboard data:",n),k.value="Failed to load dashboard data. Please try again."}finally{b.value=!1}};return j(()=>{S(),D()}),(n,e)=>{var i;return d(),a("div",N,[s("div",V,[s("div",q,[s("div",C,[e[5]||(e[5]=s("span",{class:"text-yellow-500 text-2xl mr-2"},"ðŸ‘‹",-1)),x.value?(d(),a("h2",$,[e[4]||(e[4]=r(" Welcome, ")),s("span",B,o(x.value.Name),1)])):g("",!0)]),s("p",I,[e[6]||(e[6]=r(" Department: ")),s("span",T,o(((i=x.value)==null?void 0:i.Department)||"Not assigned"),1)]),s("div",z,[s("button",{onClick:e[0]||(e[0]=t=>u(m).push("/expenses")),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},e[7]||(e[7]=[s("span",{class:"material-icons mr-2"},"add",-1),r(" Submit Expense ")])),s("button",{onClick:e[1]||(e[1]=t=>u(m).push("/reports")),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},e[8]||(e[8]=[s("span",{class:"material-icons mr-2"},"assessment",-1),r(" View Reports ")]))])]),s("div",F,[s("div",L,[s("div",M,[s("div",Q,[e[11]||(e[11]=s("div",{class:"flex-shrink-0"},[s("span",{class:"inline-flex items-center justify-center h-12 w-12 rounded-md bg-blue-500 text-white"},[s("span",{class:"material-icons text-xl"},"attach_money")])],-1)),s("div",U,[e[9]||(e[9]=s("dt",{class:"text-sm font-medium text-gray-600 truncate"},"Total Expenses",-1)),s("dd",W,o(f.value),1),e[10]||(e[10]=s("p",{class:"mt-1 text-sm text-gray-600"},"All submitted expenses",-1))])])])]),s("div",G,[s("div",H,[s("div",J,[e[14]||(e[14]=s("div",{class:"flex-shrink-0"},[s("span",{class:"inline-flex items-center justify-center h-12 w-12 rounded-md bg-amber-500 text-white"},[s("span",{class:"material-icons text-xl"},"hourglass_empty")])],-1)),s("div",K,[e[12]||(e[12]=s("dt",{class:"text-sm font-medium text-gray-600 truncate"},"Pending Reimbursements",-1)),s("dd",O,o(v.value),1),e[13]||(e[13]=s("p",{class:"mt-1 text-sm text-gray-600"},"Awaiting approval",-1))])])])]),s("div",X,[s("div",Y,[s("div",Z,[e[17]||(e[17]=s("div",{class:"flex-shrink-0"},[s("span",{class:"inline-flex items-center justify-center h-12 w-12 rounded-md bg-green-500 text-white"},[s("span",{class:"material-icons text-xl"},"check_circle")])],-1)),s("div",ss,[e[15]||(e[15]=s("dt",{class:"text-sm font-medium text-gray-600 truncate"},"Approved Requests",-1)),s("dd",es,o(y.value),1),e[16]||(e[16]=s("p",{class:"mt-1 text-sm text-gray-600"},"Successfully approved",-1))])])])])]),s("div",ts,[e[20]||(e[20]=s("div",{class:"px-6 py-5 sm:px-6"},[s("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Recent Expense Submissions")],-1)),s("ul",os,[(d(!0),a(h,null,_(p.value,t=>(d(),a("li",{key:t.id,class:"px-6 py-4 sm:px-6"},[s("div",ns,[s("p",is,o(t.type),1),s("div",ls,[s("span",{class:P(["px-2 py-1 text-xs font-medium rounded-full",{"bg-yellow-100 text-yellow-800":t.status==="Pending","bg-green-100 text-green-800":t.status==="Approved","bg-red-100 text-red-800":t.status==="Rejected"}])},o(t.status),3)])]),s("div",as,[s("div",ds,[s("span",rs,[e[18]||(e[18]=s("span",{class:"material-icons mr-1 text-gray-500 text-sm"},"calendar_today",-1)),r(" "+o(new Date(t.date).toLocaleDateString()),1)])]),e[19]||(e[19]=s("div",{class:"mt-2 sm:mt-0"},[s("a",{href:"#",class:"text-sm font-medium text-indigo-600 hover:text-indigo-500"},"View Details")],-1))])]))),128)),p.value.length===0?(d(),a("li",ms,"No recent submissions.")):g("",!0)]),e[21]||(e[21]=s("div",{class:"bg-gray-50 px-6 py-3 sm:px-6 sm:flex sm:justify-end"},[s("a",{href:"#",class:"text-sm font-medium text-indigo-600 hover:text-indigo-500"},"View All Submissions")],-1))]),s("div",xs,[e[24]||(e[24]=s("div",{class:"px-6 py-5 sm:px-6"},[s("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Pending Approval Requests")],-1)),s("ul",us,[(d(!0),a(h,null,_(c.value,t=>(d(),a("li",{key:t.id,class:"px-6 py-4 sm:px-6"},[s("div",ps,[s("p",cs,o(t.type),1),s("div",gs,[s("span",fs,o(t.status),1)])]),s("div",vs,[s("div",ys,[s("span",bs,[e[22]||(e[22]=s("span",{class:"material-icons mr-1 text-gray-500 text-sm"},"calendar_today",-1)),r(" "+o(new Date(t.date).toLocaleDateString()),1)])]),e[23]||(e[23]=s("div",{class:"mt-2 sm:mt-0"},[s("a",{href:"#",class:"text-sm font-medium text-amber-600 hover:text-amber-500"},"Review")],-1))])]))),128)),c.value.length===0?(d(),a("li",hs,"No pending requests.")):g("",!0)]),e[25]||(e[25]=s("div",{class:"bg-gray-50 px-6 py-3 sm:px-6 sm:flex sm:justify-end"},[s("a",{href:"#",class:"text-sm font-medium text-amber-600 hover:text-amber-500"},"View All Pending")],-1))]),s("div",_s,[e[28]||(e[28]=s("div",{class:"px-6 py-5 sm:px-6"},[s("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"Quick Actions")],-1)),s("div",ws,[s("button",{onClick:e[2]||(e[2]=t=>u(m).push("/expenses")),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},e[26]||(e[26]=[s("span",{class:"material-icons mr-2 text-sm"},"add",-1),r(" Submit Expense ")])),s("button",{onClick:e[3]||(e[3]=t=>u(m).push("/resources")),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},e[27]||(e[27]=[s("span",{class:"material-icons mr-2 text-sm"},"inventory",-1),r(" Request Resources ")]))])])])])}}},As=R(ks,[["__scopeId","data-v-1d27a87a"]]);export{As as default};
